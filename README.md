
# ThreadPool

### ‚ú®–ù–µ–º–Ω–æ–≥–æ —Ç–µ–æ—Ä–∏–∏

üõ†Ô∏è **ThreadPool** - —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—É–ª –ø–æ—Ç–æ–∫–æ–≤ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á. –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ—Ç–æ–∫–∞–º–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏, –æ—Å–æ–±–µ–Ω–Ω–æ –∫–æ–≥–¥–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–¥–∞—á.

–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã **ThreadPool** –≤–∫–ª—é—á–∞—é—Ç:

1. **`Executor`**. –≠—Ç–æ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á. –û–Ω –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –º–µ—Ç–æ–¥—ã –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–¥–∞—á –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ.

2. **`ExecutorService`**. –≠—Ç–æ –ø–æ–¥–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å **`Executor`**, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∑–∞–¥–∞—á –∏ –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

3. **`ThreadPoolExecutor`**. –≠—Ç–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ **`ExecutorService`**. –û–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≥–∏–±–∫–∏–π –º–µ—Ö–∞–Ω–∏–∑–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—É–ª–æ–º –ø–æ—Ç–æ–∫–æ–≤, –≤–∫–ª—é—á–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫—É —Ä–∞–∑–º–µ—Ä–∞ –ø—É–ª–∞, –æ—á–µ—Ä–µ–¥–∏ –∑–∞–¥–∞—á, –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –∏ –¥—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã.

**–ö–æ—Ä–æ—Ç–µ–Ω—å–∫–∏–π –ø—Ä–∏–º–µ—Ä**:
```java
public class Main {
    public static void main(String[] args) {
        // –°–æ–∑–¥–∞–Ω–∏–µ –ø—É–ª–∞ –ø–æ—Ç–æ–∫–æ–≤ —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Ä–∞–∑–º–µ—Ä–æ–º
        ExecutorService executor = Executors.newFixedThreadPool(5);

        // –ü–æ–¥–∞—á–∞ –∑–∞–¥–∞—á –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
        for (int i = 0; i < 10; i++) {
            Runnable task = new Task(i);
            executor.execute(task);
        }

        // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –ø—É–ª–∞ –ø–æ—Ç–æ–∫–æ–≤ –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á
        executor.shutdown();
    }
}

class Task implements Runnable {
    private int taskId;

    public Task(int taskId) {
        this.taskId = taskId;
    }

    @Override
    public void run() {
        System.out.printf("–ó–∞–¥–∞—á–∞ %d –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Ç–æ–∫–æ–º: %s", taskId, Thread.currentThread().getName());
    }
}
```
–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è –ø—É–ª –ø–æ—Ç–æ–∫–æ–≤ —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Ä–∞–∑–º–µ—Ä–æ–º (5 –ø–æ—Ç–æ–∫–æ–≤), –∏ 10 –∑–∞–¥–∞—á –ø–æ–¥–∞—é—Ç—Å—è –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ. –ö–∞–∂–¥–∞—è –∑–∞–¥–∞—á–∞ –≤—ã–≤–æ–¥–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–≤–æ—ë–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–º –ø–æ—Ç–æ–∫–æ–º.

**`ThreadPool`** –ø–æ–º–æ–≥–∞–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å —Ä–µ—Å—É—Ä—Å–∞–º–∏ —Å–∏—Å—Ç–µ–º—ã –∏ –ø–æ–≤—ã—à–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∑–∞ —Å—á—ë—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–æ—Ç–æ–∫–æ–≤ –∏ —É–º–µ–Ω—å—à–µ–Ω–∏—è –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–æ—Ç–æ–∫–æ–≤.

### üöÄ–ü—Ä–∞–∫—Ç–∏–∫–∞

–í –¥–∞–Ω–Ω–æ–π —Ä–∞–±–æ—Ç–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è 2 –∑–∞–¥–∞–Ω–∏–π, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –≤—ã—à–µ–æ–ø–∏—Å–∞–Ω–Ω–æ–π —Ç–µ–º–æ–π:
1. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è **`FixedThreadPool`** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç–æ–∫–æ–≤ –∑–∞–¥–∞–µ—Ç—Å—è –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ –∏ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è.
2. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è **`ScalableThreadPool`** - –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ –∑–∞–¥–∞–µ—Ç—Å—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ(int min, int max) —á–∏—Å–ª–æ –ø–æ—Ç–æ–∫–æ–≤.
## –ó–∞–¥–∞–Ω–∏–µ

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å **`ThreadPool`**
```java
public interface ThreadPool {
    void start(); // –ó–∞–ø—É—Å–∫–∞–µ—Ç –ø–æ—Ç–æ–∫–∏. –ü–æ—Ç–æ–∫–∏ –±–µ–∑–¥–µ–π—Å—Ç–≤—É—é—Ç –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –Ω–µ –ø–æ—è–≤–∏—Ç—Å—è –Ω–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ –≤ –æ—á–µ—Ä–µ–¥–∏ (—Å–º. execute)

    void execute(Runnable runnable); // –°–∫–ª–∞–¥—ã–≤–∞–µ—Ç —ç—Ç–æ –∑–∞–¥–∞–Ω–∏–µ –≤ –æ—á–µ—Ä–µ–¥—å. –û—Å–≤–æ–±–æ–¥–∏–≤—à–∏–π—Å—è –ø–æ—Ç–æ–∫ –¥–æ–ª–∂–µ–Ω –≤—ã–ø–æ–ª–Ω–∏—Ç—å —ç—Ç–æ –∑–∞–¥–∞–Ω–∏–µ. –ö–∞–∂–¥–æ–µ –∑–∞–¥–∞–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–æ —Ä–æ–≤–Ω–æ 1 —Ä–∞–∑
}
```
–°–¥–µ–ª–∞—Ç—å 2 —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ **`ThreadPool`**
1. **`FixedThreadPool`** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç–æ–∫–æ–≤ –∑–∞–¥–∞—ë—Ç—Å—è –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ –∏ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è.
2. **`ScalableThreadPool`** - –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ –∑–∞–¥–∞—ë—Ç—Å—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ (_int min, int max_) —á–∏—Å–ª–æ –ø–æ—Ç–æ–∫–æ–≤,
–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤ –º–æ–∂–µ—Ç –±—ã—Ç—å —É–≤–µ–ª–∏—á–µ–Ω–æ –æ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –∫ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–º—É, –µ—Å–ª–∏ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è –≤ –æ—á–µ—Ä–µ–¥—å –Ω–µ—Ç —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞ –¥–ª—è –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è. –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∑–∞–¥–∞–Ω–∏—è –≤ –æ—á–µ—Ä–µ–¥–∏, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç–æ–∫–æ–≤ —Å–Ω–æ–≤–∞ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —É–º–µ–Ω—å—à–µ–Ω–æ –¥–æ –∑–Ω–∞—á–µ–Ω–∏—è _min_.

## –û–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–î–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è –±—ã–ª —Å–æ–∑–¥–∞–Ω –∫–ª–∞—Å—Å [**`Counter`**](https://github.com/MironovNikita/sber-homework11/blob/main/src/main/java/org/example/utils/Counter.java), –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –æ—Ç–≤–µ—á–∞—Ç—å –∑–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á –¥–ª—è –Ω–∞—à–∏—Ö –ø–æ—Ç–æ–∫–æ–≤.

```java
public class Counter {
    public Double count(double a) {
        for (int i = 0; i < 2; i++) {
            a += a;
        }

        return a;
    }
}
```
–ó–∞—Ç–µ–º —Å–æ–≥–ª–∞—Å–Ω–æ –∑–∞–¥–∞–Ω–∏—é –±—ã–ª —Å–æ–∑–¥–∞–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å [**`ThreadPool`**](https://github.com/MironovNikita/sber-homework11/blob/main/src/main/java/org/example/threadPool/ThreadPool.java). –û–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç –≤ —Å–µ–±–µ —Å–ª–µ–¥—É—é—â–∏–µ –º–µ—Ç–æ–¥—ã:
1. **`void start()`** - –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø–æ—Ç–æ–∫–∏. –ü–æ—Ç–æ–∫–∏ –ø—Ä–æ—Å—Ç–∞–∏–≤–∞—é—Ç –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –≤ –æ—á–µ—Ä–µ–¥–∏ –Ω–µ –ø–æ—è–≤–∏—Ç—Å—è –Ω–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ (—Å–º. execute).
2. **`void execute(Runnable runnable)`** - –ø–æ–º–µ—â–∞–µ—Ç –∑–∞–¥–∞—á—É –≤ –æ—á–µ—Ä–µ–¥—å. –°–≤–æ–±–æ–¥–Ω—ã–π –ø–æ—Ç–æ–∫ –¥–æ–ª–∂–µ–Ω –≤—ã–ø–æ–ª–Ω–∏—Ç—å —ç—Ç—É –∑–∞–¥–∞—á—É. –ö–∞–∂–¥–∞—è –∑–∞–¥–∞—á–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —Ä–æ–≤–Ω–æ 1 —Ä–∞–∑.
3. **`void interrupt()`** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è –ø–æ—Ç–æ–∫–∞.


### üìå[FixedThreadPool](https://github.com/MironovNikita/sber-homework11/blob/main/src/main/java/org/example/threadPool/FixedThreadPool.java)

–ü–µ—Ä–µ–π–¥—ë–º –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ [**`FixedThreadPool`**](https://github.com/MironovNikita/sber-homework11/blob/main/src/main/java/org/example/threadPool/FixedThreadPool.java). –í —Å–≤–æ–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–º–µ–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª–µ–π:
- **`private final List<ThreadWorker> threads`** - —Å–ø–∏—Å–æ–∫ –ø–æ—Ç–æ–∫–æ–≤;
- **`private final Queue<Runnable> taskQueue`** - –æ—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á;
- **`private volatile boolean isRunning = true`** - —Ñ–ª–∞–≥, –ø—Ä–æ–≤–µ—Ä—è—é—â–∏–π —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ—Ç–æ–∫–∞.

### üîÄ –ü–∞—Ä–∞ —Å–ª–æ–≤ –æ **`volatile`**.

–≠—Ç–æ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ –≤ _Java_, –∫–æ—Ç–æ—Ä–æ–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ–ª–µ–π –∫–ª–∞—Å—Å–∞. –û–Ω–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä—É –∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ _Java_ –Ω–∞ —Ç–æ, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑–º–µ–Ω–µ–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø–æ—Ç–æ–∫–∞–º–∏ –∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —á–∏—Ç–∞–µ–º—ã–º –∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ–º—ã–º –Ω–∞–ø—Ä—è–º—É—é –∏–∑ –ø–∞–º—è—Ç–∏, –∞ –Ω–µ –∏–∑ –∫—ç—à–∞ –ø–æ—Ç–æ–∫–∞.

–û—Å–Ω–æ–≤–Ω—ã–µ –∞—Å–ø–µ–∫—Ç—ã **`volatile`**:

1. ***–í–∏–¥–∏–º–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–π***: –∫–æ–≥–¥–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –ø–æ–º–µ—á–µ–Ω–∞ –∫–∞–∫ **`volatile`**, –ª—é–±–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —ç—Ç–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–¥–Ω–∏–º –ø–æ—Ç–æ–∫–æ–º —Å—Ä–∞–∑—É –∂–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤–∏–¥–∏–º—ã–º –¥—Ä—É–≥–∏–º –ø–æ—Ç–æ–∫–∞–º. –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –º–µ–∂–¥—É –ø–æ—Ç–æ–∫–∞–º–∏.

2. ***–ó–∞–ø—Ä–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π***: **`volatile`** —Ç–∞–∫–∂–µ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞ –∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø–µ—Ä–µ—É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–Ω–∏—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π —á—Ç–µ–Ω–∏—è –∏ –∑–∞–ø–∏—Å–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π.

–û–¥–Ω–∞–∫–æ **`volatile`** –Ω–µ —Ä–µ—à–∞–µ—Ç –≤—Å–µ—Ö –ø—Ä–æ–±–ª–µ–º –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏. –û–Ω–æ —Ö–æ—Ä–æ—à–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö —Å–ª—É—á–∞–µ–≤, –∫–æ–≥–¥–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è –∏ –∑–∞–ø–∏—Å–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ñ–ª–∞–≥–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è), –Ω–æ –æ–Ω–æ –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞/–¥–µ–∫—Ä–µ–º–µ–Ω—Ç–∞ –∏ –Ω–µ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –±–ª–æ–∫–æ–≤ –∫–æ–¥–∞.

###

–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä **`FixedThreadPool`** –≤—ã–≥–ª—è–¥–∏—Ç —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

```java
public FixedThreadPool(int poolSize) {
        if (poolSize <= 0) throw new IllegalArgumentException(
                format("–ü–µ—Ä–µ–¥–∞–Ω–Ω–æ–µ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∑–Ω–∞—á–µ–Ω–∏–µ %d –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º!", poolSize));
        threads = new ArrayList<>(poolSize);
        taskQueue = new ConcurrentLinkedQueue<>();

        for (int i = 0; i < poolSize; i++) {
            threads.add(new ThreadWorker());
        }
    }
```
–í –±–æ–ª—å—à–µ–π —Å—Ç–µ–ø–µ–Ω–∏ –Ω–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ—á–µ—Ä–µ–¥–∏ –∑–∞–¥–∞—á, –≤ –∫–æ—Ç–æ—Ä–æ–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **`ConcurrentLinkedQueue`**. –≠—Ç–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ `Queue`, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—É—é –æ—á–µ—Ä–µ–¥—å, –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–π —Å—Ä–µ–¥–µ. –û–Ω–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤—ã—Å–æ–∫—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –¥–æ—Å—Ç—É–ø–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ—Ç–æ–∫–æ–≤ –∫ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –¥–∞–Ω–Ω—ã—Ö.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞** –¥–∞–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö: 

1. üîí **–ü–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**. **`ConcurrentLinkedQueue`** —Ä–µ–∞–ª–∏–∑—É–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∑–≤–æ–ª—è—é—Ç –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –ø–æ—Ç–æ–∫–∞–º –±–µ–∑–æ–ø–∞—Å–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å, –∏–∑–≤–ª–µ–∫–∞—Ç—å –∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã –æ—á–µ—Ä–µ–¥–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.

2. üöÄ **–í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**. –≠—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤—ã—Å–æ–∫—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–π —Å—Ä–µ–¥–µ. –û–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –µ—ë —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π –¥–∞–∂–µ –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ.

3. üìà **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –Ω–∞ —Ä–∞–∑–º–µ—Ä**. **`ConcurrentLinkedQueue`** –Ω–µ –∏–º–µ–µ—Ç —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞, –ø–æ—ç—Ç–æ–º—É –æ–Ω–∞ –º–æ–∂–µ—Ç —Ä–∞—Å—Ç–∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –¥–æ–±–∞–≤–ª—è–µ–º—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤.

4. üîÅ **–ò—Ç–µ—Ä–∞—Ç–æ—Ä—ã**. –ò—Ç–µ—Ä–∞—Ç–æ—Ä—ã, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ **`ConcurrentLinkedQueue`**, —è–≤–ª—è—é—Ç—Å—è —Å–ª–∞–±–æ-—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω—ã–º–∏, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –æ–Ω–∏ –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—é—Ç –æ—Ç—Ä–∞–∂–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –æ—á–µ—Ä–µ–¥–∏. –û–¥–Ω–∞–∫–æ –æ–Ω–∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∏—Ç–µ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–π —Å—Ä–µ–¥–µ.

5. üõ°Ô∏è **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫**. **`ConcurrentLinkedQueue`** –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏–π, —á—Ç–æ —Å–Ω–∏–∂–∞–µ—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è —Å–æ—Å—Ç—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π –∏ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫.

–¢–∞–∫–∂–µ –∑–¥–µ—Å—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –≤–ª–æ–∂–µ–Ω–Ω—ã–π –∫–ª–∞—Å—Å **`ThreadWorker`**, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞—Å—à–∏—Ä—è–µ—Ç –∫–ª–∞—Å—Å Thread –∏ –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –≤ –æ—á–µ—Ä–µ–¥–∏.

### üìå[ScalableThreadPool](https://github.com/MironovNikita/sber-homework11/blob/main/src/main/java/org/example/threadPool/ScalableThreadPool.java)

–ü–µ—Ä–µ–π–¥—ë–º –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ [**`ScalableThreadPool`**](https://github.com/MironovNikita/sber-homework11/blob/main/src/main/java/org/example/threadPool/ScalableThreadPool.java). –í —Å–≤–æ–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–º–µ–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª–µ–π:
- **`private final int minPoolSize`** - –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç–æ–∫–æ–≤;
- **`private final int maxPoolSize`** - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç–æ–∫–æ–≤;
- **`private final List<WorkerThread> threads`** - —Å–ø–∏—Å–æ–∫ –ø–æ—Ç–æ–∫–æ–≤;
- **`private final Queue<Runnable> taskQueue`**- –æ—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á;
- **`private volatile boolean isRunning = true`** - —Ñ–ª–∞–≥, –ø—Ä–æ–≤–µ—Ä—è—é—â–∏–π —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ—Ç–æ–∫–∞.

–¢–∞–∫–∂–µ –∑–¥–µ—Å—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –≤–ª–æ–∂–µ–Ω–Ω—ã–π –∫–ª–∞—Å—Å **`WorkerThread`**, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞—Å—à–∏—Ä—è–µ—Ç –∫–ª–∞—Å—Å Thread –∏ –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –≤ –æ—á–µ—Ä–µ–¥–∏.

–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä **`ScalableThreadPool`** –≤—ã–≥–ª—è–¥–∏—Ç —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

```java
public ScalableThreadPool(int minPoolSize, int maxPoolSize) {
        if (minPoolSize <= 0 || maxPoolSize <= 0 || minPoolSize >= maxPoolSize) {
            throw new IllegalArgumentException(
                    format("–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∑–Ω–∞—á–µ–Ω–∏—è: min: %d, max: %d. –û–Ω–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å" +
                                    "–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º–∏ –∏ –Ω–µ —Ä–∞–≤–Ω—ã –¥—Ä—É–≥ –¥—Ä—É–≥—É!",
                            minPoolSize, maxPoolSize));
        }

        this.minPoolSize = minPoolSize;
        this.maxPoolSize = maxPoolSize;
        threads = new ArrayList<>();
        taskQueue = new ConcurrentLinkedQueue<>();
    }
```

### üìè –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –∫–ª–∞—Å—Å—ã üìé

–í –ø–∞–∫–µ—Ç–µ [**task**](https://github.com/MironovNikita/sber-homework11/tree/main/src/main/java/org/example/task) —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω—ã –∫–ª–∞—Å—Å—ã, –æ—Ç–≤–µ—á–∞—é—â–∏–µ –∑–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤ –∫–æ–Ω—Å–æ–ª–∏ - [**TaskHandler**](https://github.com/MironovNikita/sber-homework11/blob/main/src/main/java/org/example/task/TaskHandler.java) –∏ –∫–ª–∞—Å—Å [**TaskRunner**](https://github.com/MironovNikita/sber-homework11/blob/main/src/main/java/org/example/task/TaskRunner.java), –æ—Ç–≤–µ—á–∞—é—â–∏–π –∑–∞ –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∫–æ–¥–∞.

### –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–µ–º –≤ Main
üî¨–ü—Ä–æ–≤–µ–¥—ë–º –Ω–µ–±–æ–ª—å—à–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∫–ª–∞—Å—Å–µ [**`Main`**](https://github.com/MironovNikita/sber-homework11/blob/main/src/main/java/org/example/Main.java).

```java
public class Main {
    public static void main(String[] args) {
        TaskHandler taskHandler = new TaskHandler();
        taskHandler.run();
    }
}
```
–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø–æ–ª—É—á–∏–º —Å–ª–µ–¥—É—é—â–µ–µ –º–µ–Ω—é:

![mainMenu](https://github.com/MironovNikita/sber-homework11/blob/main/res/mainMenu.png)

–í—ã–±–µ—Ä–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É **`FixedThreadPool`**:
–í –¥–∞–Ω–Ω–æ–º –∑–∞–¥–∞–Ω–∏–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è 5 –∑–∞–¥–∞—á, –∞ –ø—É–ª –ø–æ—Ç–æ–∫–æ–≤ —Å–æ–¥–µ—Ä–∂–∏—Ç 3 –ø–æ—Ç–æ–∫–∞.

```java
ThreadPool fixedThreadPool = new FixedThreadPool(3);

...
for (int i = 1; i <= 5; i++) {
            int threadNumber = i;

            fixedThreadPool.execute(() -> {
...
```

![task1](https://github.com/MironovNikita/sber-homework11/blob/main/res/task1.png)

–ö–∞–∫ –º–æ–∂–µ–º –≤–∏–¥–µ—Ç—å, –≤—Å–µ –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω–∏–ª–∏—Å—å –Ω–∞—à–∏–º –ø—É–ª–æ–º –ø–æ—Ç–æ–∫–æ–≤, –∞ –∑–∞—Ç–µ–º –∑–∞–≤–µ—Ä—à–∏–ª–∏—Å—å, —Ç.–∫. –Ω–∞–º –æ—Ç–æ–±—Ä–∞–∑–∏–ª–æ—Å—å –º–µ–Ω—é –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –≤—ã–±–æ—Ä–∞.

–ü–µ—Ä–µ–π–¥—ë–º –∫ –ø—Ä–æ–≤–µ—Ä–∫–µ **`ScalableThreadPool`**:
–í –¥–∞–Ω–Ω–æ–º –∑–∞–¥–∞–Ω–∏–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è 10 –∑–∞–¥–∞—á, –∞ –ø—É–ª –ø–æ—Ç–æ–∫–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –ø–æ—Ç–æ–∫–æ–≤ - 2, –∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º - 5.

```java
ThreadPool scalableThreadPool = new ScalableThreadPool(2, 5);

...
for (int i = 1; i <= 10; i++) {
            int threadNumber = i;

            scalableThreadPool.execute(() -> {
...
```

![task2](https://github.com/MironovNikita/sber-homework11/blob/main/res/task2.png)

–ö–∞–∫ –≤–∏–¥–∏–º –∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤, –≤—Å–µ –∑–∞–¥–∞—á–∏ –±—ã–ª–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã, –∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç–æ–∫–æ–≤ –Ω–µ –ø—Ä–µ–≤—ã—à–∞–ª–æ _–ø—è—Ç–∏_ (_Thread-3 - Thread-7_).

‚ö†Ô∏è –ü–æ–¥—Ä–æ–±–Ω–µ–µ —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –º–µ—Ç–æ–¥–∞–º–∏ –º–æ–∂–Ω–æ –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è –≤ –∫–ª–∞—Å—Å–µ [**TaskRunner**](https://github.com/MironovNikita/sber-homework11/blob/main/src/main/java/org/example/task/TaskRunner.java). üì¢

### –ù–∏ Main'–æ–º –µ–¥–∏–Ω—ã–º üåê

–¢–∞–∫–∂–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞—à–∏—Ö –ø—É–ª–æ–≤ –ø–æ—Ç–æ–∫–æ–≤ –±—ã–ª–∏ –Ω–∞–ø–∏—Å–∞–Ω—ã —Ç–µ—Å—Ç—ã, –Ω–∞—Ö–æ–¥—è—â–∏–µ—Å—è –≤ –∫–ª–∞—Å—Å–∞—Ö [**FixedThreadPoolTest**](https://github.com/MironovNikita/sber-homework11/blob/main/src/test/java/FixedThreadPoolTest.java) –∏ [**ScalableThreadPoolTest**](https://github.com/MironovNikita/sber-homework11/blob/main/src/test/java/ScalableThreadPoolTest.java).
–î–∞–Ω–Ω—ã–µ –∫–ª–∞—Å—Å—ã —Å–æ–¥–µ—Ä–∂–∞—Ç —Ç–µ—Å—Ç—ã, –ø—Ä–æ–≤–µ—Ä—è—é—â–∏–µ:
- —á—Ç–æ –≤—Å–µ –∑–∞–¥–∞—á–∏, –ø–æ–ø–∞–¥–∞—é—â–∏–µ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–∞—à–∏–º –ø—É–ª–æ–º –ø–æ—Ç–æ–∫–æ–º –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –µ–¥–∏–Ω–æ–∂–¥—ã;
- —á—Ç–æ –≤—Å–µ –ø–æ—Ç–æ–∫–∏ –∑–∞–≤–µ—Ä—à–∞—é—Ç —Å–≤–æ—é —Ä–∞–±–æ—Ç—É –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –≤—ã–∑–æ–≤–∞ –º–µ—Ç–æ–¥–∞ **`interrupt`**.

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤ –¥–ª—è **`FixedThreadPool`**:

![fixedThreadTest](https://github.com/MironovNikita/sber-homework11/blob/main/res/fixedThreadTest.png)

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤ –¥–ª—è **`ScalableThreadPool`**:

![scalableThreadTest](https://github.com/MironovNikita/sber-homework11/blob/main/res/scalableThreadTest.png)

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤:

![allTests](https://github.com/MironovNikita/sber-homework11/blob/main/res/allTests.png)

–ö–∞–∫ –≤–∏–¥–Ω–æ –∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤, –Ω–∞—à–∏ –ø—É–ª—ã –ø–æ—Ç–æ–∫–æ–≤ –æ—Ç—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ. –í—Å–µ –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –µ–¥–∏–Ω–æ–∂–¥—ã, –∞ –ø–æ—Ç–æ–∫–∏ –ø—Ä–µ—Ä—ã–≤–∞—é—Ç—Å—è –≤ —Å–ª—É—á–∞–µ –∑–∞–∫—Ä—ã—Ç–∏—è –ø—É–ª–∞ –ø–æ—Ç–æ–∫–æ–≤.

### üí° –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ

–¢–µ—Å—Ç—ã –Ω–∞–ø–∏—Å–∞–Ω—ã —Å –ø–æ–º–æ—â—å—é –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ JUnit (*junit-jupiter*). –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ [**`pom.xml`**](https://github.com/MironovNikita/sber-homework11/blob/main/pom.xml) 

–í–µ—Ä—Å–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–ø–∏—Å–∞–Ω–∞ –≤ –±–ª–æ–∫–µ *properties /properties*:

```java
<junit.version>5.10.1</junit.version>
```

–†–µ–∑—É–ª—å—Ç–∞—Ç —Å–±–æ—Ä–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞:

```java
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  10.344 s
[INFO] Finished at: 2024-02-07T23:49:27+03:00
[INFO] ------------------------------------------------------------------------
```

### ‚ùì –í–æ–ø—Ä–æ—Å—ã –¥–ª—è —Å–∞–º–æ–∫–æ–Ω—Ç—Ä–æ–ª—è ‚ùì

1. **–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ —Ç–µ–∫—É—â–∏–π –ø–æ—Ç–æ–∫?**

–û—Ç–≤–µ—Ç: –ø–æ–ª—É—á–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ —Ç–µ–∫—É—â–∏–π –ø–æ—Ç–æ–∫ (—Ç–µ–∫—É—â–∏–π –∏—Å–ø–æ–ª–Ω—è—é—â–∏–π—Å—è –ø–æ—Ç–æ–∫) —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞ **`currentThread()`** –∫–ª–∞—Å—Å–∞ **`Thread`**.

```java
Thread currentThread = Thread.currentThread();
System.out.println("–°—Å—ã–ª–∫–∞ –Ω–∞ —Ç–µ–∫—É—â–∏–π –ø–æ—Ç–æ–∫: " + currentThread);
```
–≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –≤—ã–≤–µ–¥–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–µ–∫—É—â–µ–º –ø–æ—Ç–æ–∫–µ, –≤–∫–ª—é—á–∞—è –µ–≥–æ –∏–º—è –∏ –¥—Ä—É–≥–∏–µ –∞—Ç—Ä–∏–±—É—Ç—ã.

2. **–ó–∞—á–µ–º –Ω—É–∂–Ω–æ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ synchronized ? –ù–∞ —á—Ç–æ –µ–≥–æ –º–æ–∂–Ω–æ –≤–µ—â–∞—Ç—å(–ø–æ–ª–µ, –º–µ—Ç–æ–¥, –∫–ª–∞—Å—Å, –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä..)?**

–û—Ç–≤–µ—Ç: –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ `synchronized` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –æ–±—â–∏–º —Ä–µ—Å—É—Ä—Å–∞–º –º–µ–∂–¥—É –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø–æ—Ç–æ–∫–∞–º–∏. –û–Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–æ –∫ —Ä–∞–∑–ª–∏—á–Ω—ã–º —á–∞—Å—Ç—è–º –∫–æ–¥–∞:

- _–º–µ—Ç–æ–¥—ã_: —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ—Ç–æ–¥–∞ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –ø–æ—Ç–æ–∫ –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏. –î—Ä—É–≥–∏–µ –ø–æ—Ç–æ–∫–∏, –ø—ã—Ç–∞—é—â–∏–µ—Å—è –≤—ã–∑–≤–∞—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–µ—Ç–æ–¥, –±—É–¥—É—Ç –æ–∂–∏–¥–∞—Ç—å, –ø–æ–∫–∞ –æ–Ω –Ω–µ –æ—Å–≤–æ–±–æ–¥–∏—Ç—Å—è.
```java
public synchronized void someMethod() {
    // –∫–æ–¥ –º–µ—Ç–æ–¥–∞
}
```
- _–±–ª–æ–∫–∏ –∫–æ–¥–∞_: —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –±–ª–æ–∫–∞ –∫–æ–¥–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –æ–±–ª–∞—Å—Ç—å –∫–æ–¥–∞, –∫ –∫–æ—Ç–æ—Ä–æ–π –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è, –≤–º–µ—Å—Ç–æ –≤—Å–µ–≥–æ –º–µ—Ç–æ–¥–∞.
```java
synchronized (someObject) {
    // –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å
}
```
- _c—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã:_
```java
public static synchronized void someStaticMethod() {
    // –∫–æ–¥ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–µ—Ç–æ–¥–∞
}
```
- _—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –±–ª–æ–∫–∏ –∫–æ–¥–∞:_
```java
synchronized (SomeClass.class) {
    // –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å
}
```
–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `synchronized`, Java –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä (–±–ª–æ–∫–∏—Ä–æ–≤–∫—É) –¥–ª—è –æ–±—ä–µ–∫—Ç–∞ –∏–ª–∏ –∫–ª–∞—Å—Å–∞, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è, —á—Ç–æ–±—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –ø–æ—Ç–æ–∫ –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —É—á–∞—Å—Ç–æ–∫ –∫–æ–¥–∞ –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏.

3. **–ó–∞—Ö–≤–∞—Ç –∫–∞–∫–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –≤—Ö–æ–¥–µ –≤ synchronized –º–µ—Ç–æ–¥/—Å—Ç–∞—Ç–∏–∫ –º–µ—Ç–æ–¥/–±–ª–æ–∫?**

–û—Ç–≤–µ—Ç: –ø—Ä–∏ –≤—Ö–æ–¥–µ –≤ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–µ—Ç–æ–¥, —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥ –∏–ª–∏ –±–ª–æ–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∑–∞—Ö–≤–∞—Ç –º–æ–Ω–∏—Ç–æ—Ä–∞ –æ–±—ä–µ–∫—Ç–∞ –∏–ª–∏ –∫–ª–∞—Å—Å–∞, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è.

- _—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–µ—Ç–æ–¥_: –º–æ–Ω–∏—Ç–æ—Ä –æ–±—ä–µ–∫—Ç–∞, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–µ—Ç–æ–¥, –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç—Å—è.

```java
public synchronized void synchronizedMethod() {
    // –∫–æ–¥ –º–µ—Ç–æ–¥–∞
}
```
–í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –º–æ–Ω–∏—Ç–æ—Ä–æ–º –±—É–¥–µ—Ç –æ–±—ä–µ–∫—Ç, –¥–ª—è –∫–æ—Ç–æ—Ä–æ–≥–æ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –º–µ—Ç–æ–¥ `synchronizedMethod()`.

- _—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–µ—Ç–æ–¥_: –ó–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç—Å—è –º–æ–Ω–∏—Ç–æ—Ä –∫–ª–∞—Å—Å–∞.

```java
public static synchronized void synchronizedStaticMethod() {
    // –∫–æ–¥ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–µ—Ç–æ–¥–∞
}
```
–ó–¥–µ—Å—å –º–æ–Ω–∏—Ç–æ—Ä–æ–º –±—É–¥–µ—Ç –∫–ª–∞—Å—Å, –≤ –∫–æ—Ç–æ—Ä–æ–º –æ–ø—Ä–µ–¥–µ–ª—ë–Ω —ç—Ç–æ—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥.

- _—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –±–ª–æ–∫ –∫–æ–¥–∞_: –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç—Å—è –º–æ–Ω–∏—Ç–æ—Ä –æ–±—ä–µ–∫—Ç–∞ –∏–ª–∏ –∫–ª–∞—Å—Å–∞, –∫–æ—Ç–æ—Ä—ã–π —É–∫–∞–∑–∞–Ω –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –±–ª–æ–∫–∞ `synchronized`.

```java
synchronized (someObject) {
    // –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å
}
```
–í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –º–æ–Ω–∏—Ç–æ—Ä–æ–º –º–æ–∂–µ—Ç –±—ã—Ç—å –∫–∞–∫–æ–π-—Ç–æ –æ–±—ä–µ–∫—Ç (`someObject`) –∏–ª–∏ –∫–ª–∞—Å—Å, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `synchronized` (`SomeClass.class`).

–ó–∞—Ö–≤–∞—Ç –º–æ–Ω–∏—Ç–æ—Ä–∞ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –ø–æ—Ç–æ–∫ –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —É—á–∞—Å—Ç–æ–∫ –∫–æ–¥–∞ –≤ —Ä–∞–º–∫–∞—Ö –æ–±—ä–µ–∫—Ç–∞ –∏–ª–∏ –∫–ª–∞—Å—Å–∞ –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏. –ï—Å–ª–∏ –º–æ–Ω–∏—Ç–æ—Ä —É–∂–µ –∑–∞—Ö–≤–∞—á–µ–Ω –¥—Ä—É–≥–∏–º –ø–æ—Ç–æ–∫–æ–º, —Ç–æ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ—Ç–æ–∫–∏ –±—É–¥—É—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã –∏ –æ–∂–∏–¥–∞—é—Ç –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –º–æ–Ω–∏—Ç–æ—Ä–∞.

4. –ó–∞—á–µ–º –Ω—É–∂–Ω–æ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ `volatile`? –ù–∞ —á—Ç–æ –µ–≥–æ –º–æ–∂–Ω–æ –≤–µ—à–∞—Ç—å (–ø–æ–ª–µ, –º–µ—Ç–æ–¥, –∫–ª–∞—Å—Å, –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä..)?

–û—Ç–≤–µ—Ç: –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ **`volatile`** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø–æ—Ç–æ–∫–∞–º–∏. –û–Ω–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å —ç—Ç–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –±—É–¥—É—Ç –∞—Ç–æ–º–∞—Ä–Ω—ã–º–∏ (—Ç–æ –µ—Å—Ç—å –Ω–µ –±—É–¥—É—Ç –ø–æ–¥–≤–µ—Ä–∂–µ–Ω—ã –ø–µ—Ä–µ—É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–Ω–∏—é –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–æ–º –∏–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–º) –∏ –≤–∏–¥–∏–º—ã–º–∏ –¥–ª—è –≤—Å–µ—Ö –ø–æ—Ç–æ–∫–æ–≤.

**`volatile`** –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–æ **—Ç–æ–ª—å–∫–æ** –∫ –ø–æ–ª—è–º –∫–ª–∞—Å—Å–∞. –û–Ω–æ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–æ –∫ –º–µ—Ç–æ–¥–∞–º, –∫–ª–∞—Å—Å–∞–º –∏–ª–∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞–º.

–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `volatile`:

```java
public class SharedObject {
    private volatile int sharedVariable;
    
    public void setSharedVariable(int value) {
        this.sharedVariable = value;
    }
    
    public int getSharedVariable() {
        return this.sharedVariable;
    }
}
```
–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –ø–æ–ª–µ `sharedVariabl`e –ø–æ–º–µ—á–µ–Ω–æ –∫–∞–∫ **`volatile`**, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ª—é–±—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è, –≤–Ω–µ—Å—ë–Ω–Ω—ã–µ –≤ —ç—Ç–æ –ø–æ–ª–µ –æ–¥–Ω–∏–º –ø–æ—Ç–æ–∫–æ–º, –±—É–¥—É—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –≤–∏–¥–Ω—ã –¥—Ä—É–≥–∏–º –ø–æ—Ç–æ–∫–∞–º. –ë–µ–∑ –∫–ª—é—á–µ–≤–æ–≥–æ —Å–ª–æ–≤–∞ **`volatile`** —ç—Ç–∞ –≥–∞—Ä–∞–Ω—Ç–∏—è –≤–∏–¥–∏–º–æ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–µ –±—ã–ª–∞ –±—ã –¥–∞–Ω–∞.

**`volatile`** –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω–æ –≤ —Å–∏—Ç—É–∞—Ü–∏—è—Ö, –≥–¥–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç–æ–∫–æ–≤ –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å –∏ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –æ–¥–Ω—É –∏ —Ç—É –∂–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é, –∏ –≥–¥–µ —ç—Ç–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π.

5. –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –º–µ—Ç–æ–¥—ã `Object#wait`, `Object#notify`, `Object#notifyAll`?

–û—Ç–≤–µ—Ç: –º–µ—Ç–æ–¥—ã **`wait()`**, **`notify()`**, –∏ **`notifyAll()`** —è–≤–ª—è—é—Ç—Å—è —á–∞—Å—Ç—å—é –º–µ—Ö–∞–Ω–∏–∑–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å—é –≤ Java –∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤ –∫–ª–∞—Å—Å–µ **`Object`**.

- **`wait()`**: —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –æ–±—ä–µ–∫—Ç–µ –∏ –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–µ–∫—É—â–∏–π –ø–æ—Ç–æ–∫ –æ–∂–∏–¥–∞—Ç—å, –ø–æ–∫–∞ –¥—Ä—É–≥–æ–π –ø–æ—Ç–æ–∫ –Ω–µ –≤—ã–∑–æ–≤–µ—Ç **`notify()`** –∏–ª–∏ **`notifyAll()`** –Ω–∞ —Ç–æ–º –∂–µ –æ–±—ä–µ–∫—Ç–µ, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –±—ã–ª –≤—ã–∑–≤–∞–Ω **`wait()`**. –ö–æ–≥–¥–∞ –¥—Ä—É–≥–æ–π –ø–æ—Ç–æ–∫ –≤—ã–∑—ã–≤–∞–µ—Ç –æ–¥–∏–Ω –∏–∑ —ç—Ç–∏—Ö –º–µ—Ç–æ–¥–æ–≤, –ø–æ—Ç–æ–∫, –Ω–∞—Ö–æ–¥—è—â–∏–π—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –æ–∂–∏–¥–∞–Ω–∏—è, –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Å–≤–æ—é —Ä–∞–±–æ—Ç—É. –ú–µ—Ç–æ–¥ **`wait()`** –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–∑–≤–∞–Ω —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –¥–ª—è —É–∫–∞–∑–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –æ–∂–∏–¥–∞–Ω–∏—è –∏–ª–∏ –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–ª—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ –æ–∂–∏–¥–∞–Ω–∏—è.

- **`notify()`**: —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ —Ç–∞–∫–∂–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –æ–±—ä–µ–∫—Ç–µ –∏ —Å–æ–æ–±—â–∞–µ—Ç –æ–¥–Ω–æ–º—É –∏–∑ –ø–æ—Ç–æ–∫–æ–≤, –æ–∂–∏–¥–∞—é—â–∏—Ö –Ω–∞ —ç—Ç–æ–º –æ–±—ä–µ–∫—Ç–µ, —á—Ç–æ–±—ã –æ–Ω –ø—Ä–µ–∫—Ä–∞—Ç–∏–ª –æ–∂–∏–¥–∞–Ω–∏–µ –∏ –ø—Ä–æ–¥–æ–ª–∂–∏–ª —Å–≤–æ—é —Ä–∞–±–æ—Ç—É. –ö–∞–∫–æ–π –∏–º–µ–Ω–Ω–æ –ø–æ—Ç–æ–∫ –±—É–¥–µ—Ç –≤—ã–±—Ä–∞–Ω –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –ø–æ—Ç–æ–∫–æ–≤ –∏ –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫. –û–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –æ–±—ä–µ–∫—Ç –ø–µ—Ä–µ—à—ë–ª –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ –¥—Ä—É–≥–∏–º –ø–æ—Ç–æ–∫–æ–º.

- **`notifyAll()`**: —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ —Ç–∞–∫–∂–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –æ–±—ä–µ–∫—Ç–µ –∏ —Å–æ–æ–±—â–∞–µ—Ç –≤—Å–µ–º –ø–æ—Ç–æ–∫–∞–º, –æ–∂–∏–¥–∞—é—â–∏–º –Ω–∞ —ç—Ç–æ–º –æ–±—ä–µ–∫—Ç–µ, —á—Ç–æ–±—ã –æ–Ω–∏ –ø—Ä–µ–∫—Ä–∞—Ç–∏–ª–∏ –æ–∂–∏–¥–∞–Ω–∏–µ –∏ –ø—Ä–æ–¥–æ–ª–∂–∏–ª–∏ —Å–≤–æ—é —Ä–∞–±–æ—Ç—É. –í—Å–µ –ø–æ—Ç–æ–∫–∏, –æ–∂–∏–¥–∞—é—â–∏–µ –Ω–∞ —ç—Ç–æ–º –æ–±—ä–µ–∫—Ç–µ, –±—É–¥—É—Ç —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã –∏ –ø–æ–ø—ã—Ç–∞—é—Ç—Å—è —Å–Ω–æ–≤–∞ –∑–∞—Ö–≤–∞—Ç–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä –æ–±—ä–µ–∫—Ç–∞, —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ. –û–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–µ—Ç –∑–∞—Ç—Ä–æ–Ω—É—Ç—å –≤—Å–µ –ø–æ—Ç–æ–∫–∏, –æ–∂–∏–¥–∞—é—â–∏–µ —ç—Ç–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞.

–≠—Ç–∏ –º–µ—Ç–æ–¥—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å –º–æ–Ω–∏—Ç–æ—Ä–∞–º–∏ –æ–±—ä–µ–∫—Ç–æ–≤ –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ—Ç–æ–∫–æ–≤ –∏ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –æ–±—â–∏–º —Ä–µ—Å—É—Ä—Å–∞–º –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö. –û–Ω–∏ –ø–æ–º–æ–≥–∞—é—Ç –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É –º–µ–∂–¥—É –ø–æ—Ç–æ–∫–∞–º–∏, —Å–∏–≥–Ω–∞–ª–∏–∑–∏—Ä—É—è –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –æ–±—ä–µ–∫—Ç–∞ –∏ —É–≤–µ–¥–æ–º–ª—è—è –¥—Ä—É–≥–∏–µ –ø–æ—Ç–æ–∫–∏ –æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ.

6. –ß—Ç–æ –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ **`IllegalMonitorStateException`**?

–û—Ç–≤–µ—Ç: **`IllegalMonitorStateException`** - —ç—Ç–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç, –∫–æ–≥–¥–∞ –ø–æ–ø—ã—Ç–∫–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é —Å –º–æ–Ω–∏—Ç–æ—Ä–æ–º –æ–±—ä–µ–∫—Ç–∞ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ.

–≠—Ç–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –º–æ–∂–µ—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å –≤ —Å–ª–µ–¥—É—é—â–∏—Ö —Å–ª—É—á–∞—è—Ö:

- –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –≤—ã–∑–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã **`wait()`**, **`notify()`** –∏–ª–∏ **`notifyAll()`** –±–µ–∑ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∑–∞—Ö–≤–∞—Ç–∞ –º–æ–Ω–∏—Ç–æ—Ä–∞ –æ–±—ä–µ–∫—Ç–∞ –ø—Ä–∏ –ø–æ–º–æ—â–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ `synchronized` –∏–ª–∏ —è–≤–Ω—ã–º –æ–±—Ä–∞–∑–æ–º.

–ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –æ—Å–≤–æ–±–æ–¥–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä –æ–±—ä–µ–∫—Ç–∞ (**`notify()`** –∏–ª–∏ **`notifyAll()`**) –Ω–µ –≤–ª–∞–¥–µ—è –∏–º.

–ü—Ä–∏–º–µ—Ä:

```java
public class Example {
    private Object lock = new Object();

    public void doSomething() {
        synchronized (lock) {
            // –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä lock
            // ...
            lock.notify(); // –û—à–∏–±–∫–∞: IllegalMonitorStateException
        }
    }
}
```
–ó–¥–µ—Å—å –º–µ—Ç–æ–¥ `doSomething()` –∑–∞—â–∏—â—ë–Ω —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –±–ª–æ–∫–æ–º —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –æ–±—ä–µ–∫—Ç–∞ `lock`. –û–¥–Ω–∞–∫–æ –≤—ã–∑–æ–≤ **`lock.notify()`** –≤—ã–∑—ã–≤–∞–µ—Ç **`IllegalMonitorStateException`**, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ, –≥–¥–µ –º–æ–Ω–∏—Ç–æ—Ä –æ–±—ä–µ–∫—Ç–∞ `lock` –∑–∞—Ö–≤–∞—á–µ–Ω.

–≠—Ç–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –æ–±—ã—á–Ω–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –æ—à–∏–±–∫—É –≤ –ª–æ–≥–∏–∫–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –ø—É—Ç—ë–º –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –º–æ–Ω–∏—Ç–æ—Ä–æ–≤ –æ–±—ä–µ–∫—Ç–æ–≤ –∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ `synchronized`.

7. –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –º–µ—Ç–æ–¥ `Thread#join`?

–û—Ç–≤–µ—Ç: –º–µ—Ç–æ–¥ `join()` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–∂–∏–¥–∞–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ—Ç–æ–∫–∞, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –æ–Ω –±—ã–ª –≤—ã–∑–≤–∞–Ω. –û–Ω –±–ª–æ–∫–∏—Ä—É–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ—Ç–æ–∫–∞, –ø–æ–∫–∞ —Ü–µ–ª–µ–≤–æ–π –ø–æ—Ç–æ–∫ –Ω–µ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è.

–ö–æ–≥–¥–∞ –ø–æ—Ç–æ–∫ –≤—ã–∑—ã–≤–∞–µ—Ç –º–µ—Ç–æ–¥ `join()` –¥–ª—è –¥—Ä—É–≥–æ–≥–æ –ø–æ—Ç–æ–∫–∞, —Ç–µ–∫—É—â–∏–π –ø–æ—Ç–æ–∫ –æ–∂–∏–¥–∞–µ—Ç, –ø–æ–∫–∞ —ç—Ç–æ—Ç –¥—Ä—É–≥–æ–π –ø–æ—Ç–æ–∫ –Ω–µ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è. –ï—Å–ª–∏ –ø–æ—Ç–æ–∫, –¥–ª—è –∫–æ—Ç–æ—Ä–æ–≥–æ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `join()`, —É–∂–µ –∑–∞–≤–µ—Ä—à–∏–ª —Å–≤–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ, —Ç–æ –º–µ—Ç–æ–¥ `join()` –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ.

–ú–µ—Ç–æ–¥ `join()` –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–∑–≤–∞–Ω —Å –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º, –∫–æ—Ç–æ—Ä—ã–π –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–æ—Ç–æ–∫–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, `join(1000)` –∑–∞—Å—Ç–∞–≤–∏—Ç —Ç–µ–∫—É—â–∏–π –ø–æ—Ç–æ–∫ –æ–∂–∏–¥–∞—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ü–µ–ª–µ–≤–æ–≥–æ –ø–æ—Ç–æ–∫–∞ _–Ω–µ –±–æ–ª–µ–µ_ 1000 –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥.

8. –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –º–µ—Ç–æ–¥ `Thread#interrupt`?

–û—Ç–≤–µ—Ç: –º–µ—Ç–æ–¥ `interrupt()` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ—Ç–æ–∫–∞. –ö–æ–≥–¥–∞ –ø–æ—Ç–æ–∫ –≤—ã–∑—ã–≤–∞–µ—Ç —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ –¥–ª—è —Å–µ–±—è –∏–ª–∏ –¥–ª—è –¥—Ä—É–≥–æ–≥–æ –ø–æ—Ç–æ–∫–∞, –æ–Ω —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ñ–ª–∞–≥ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è –¥–ª—è —ç—Ç–æ–≥–æ –ø–æ—Ç–æ–∫–∞.

–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ —Ñ–ª–∞–≥ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –ø–æ—Ç–æ–∫ –º–æ–∂–µ—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–≤–æ—ë —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞ `isInterrupted()` –∏–ª–∏ –µ–≥–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–æ–≥–∞ `Thread.interrupted()`. –ü—Ä–∏ –≤—ã–∑–æ–≤–µ `isInterrupted()` –ø–æ—Ç–æ–∫ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –±—ã–ª –ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —Ñ–ª–∞–≥ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è, –Ω–æ –Ω–µ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç –µ–≥–æ. –ú–µ—Ç–æ–¥ `Thread.interrupted()` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ñ–ª–∞–≥ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è –∏, –µ—Å–ª–∏ –æ–Ω –±—ã–ª —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç –µ–≥–æ.

–ö–∞–∫ –ø–æ—Ç–æ–∫ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ, –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –µ–≥–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏. –û–±—ã—á–Ω–æ –ø–æ—Ç–æ–∫ –º–æ–∂–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ñ–ª–∞–≥ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏ –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ä–µ—à–µ–Ω–∏–µ –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Å–≤–æ–µ–π —Ä–∞–±–æ—Ç—ã, –µ—Å–ª–∏ —Ñ–ª–∞–≥ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω.